import{a as Ae}from"./chunk-D63YTRBT.js";import{$ as $t,A as ze,B as $e,C as he,D as kt,E as I,F as Et,G as Dt,H as It,I as Lt,J as Ft,K as L,L as He,M as F,N as Tt,O as Bt,P as T,Q as At,R as B,S as Rt,T as Ut,U as We,V as Nt,W as Vt,X as jt,Y as zt,Z as A,_ as R,a as xt,aa as U,ba as Ht,c as Re,ca as Wt,da as N,e as Ue,ea as _e,fa as qt,j as Ne,l as ge,m as y,n as bt,o as vt,p as wt,q as k,r as St,s as Ve,t as Ot,u as E,v as Pt,w as yt,x as D,y as Me,z as je}from"./chunk-WDTUNW5Z.js";import{Da as O,Ea as P,F as ct,Fa as J,Ga as q,Ha as G,Hb as De,Ia as h,Ja as o,Jb as Ie,K as ue,Ka as i,La as M,Mb as we,Nb as Le,O as u,Pa as V,Q as b,R as v,Ra as m,Rb as ht,Ta as f,Tb as _t,Ub as fe,Vb as Fe,Xa as pt,Y as x,Ya as mt,Za as ut,Zb as Te,_b as Be,a as K,b as tt,bb as ft,bc as Ct,c as Jt,cc as c,d as Zt,eb as ot,fb as s,g as ve,gb as _,hb as j,ia as l,ib as gt,jb as Pe,kb as ye,lb as ke,ma as nt,mb as H,nb as it,pb as Ee,qa as S,wb as Mt,xb as X}from"./chunk-YEBIPHEF.js";var Yt=Jt((rt,st)=>{"use strict";(function(a,t){typeof define=="function"&&define.amd?define([],t):typeof rt<"u"?t():(t(),a.FileSaver={})})(rt,function(){"use strict";function a(p,g){return typeof g>"u"?g={autoBom:!1}:typeof g!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),g={autoBom:!g}),g.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(p.type)?new Blob(["\uFEFF",p],{type:p.type}):p}function t(p,g,z){var C=new XMLHttpRequest;C.open("GET",p),C.responseType="blob",C.onload=function(){w(C.response,g,z)},C.onerror=function(){console.error("could not download file")},C.send()}function e(p){var g=new XMLHttpRequest;g.open("HEAD",p,!1);try{g.send()}catch{}return 200<=g.status&&299>=g.status}function n(p){try{p.dispatchEvent(new MouseEvent("click"))}catch{var g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),p.dispatchEvent(g)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,d=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),w=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!d?function(p,g,z){var C=r.URL||r.webkitURL,$=document.createElement("a");g=g||p.name||"download",$.download=g,$.rel="noopener",typeof p=="string"?($.href=p,$.origin===location.origin?n($):e($.href)?t(p,g,z):n($,$.target="_blank")):($.href=C.createObjectURL(p),setTimeout(function(){C.revokeObjectURL($.href)},4e4),setTimeout(function(){n($)},0))}:"msSaveOrOpenBlob"in navigator?function(p,g,z){if(g=g||p.name||"download",typeof p!="string")navigator.msSaveOrOpenBlob(a(p,z),g);else if(e(p))t(p,g,z);else{var C=document.createElement("a");C.href=p,C.target="_blank",setTimeout(function(){n(C)})}}:function(p,g,z,C){if(C=C||open("","_blank"),C&&(C.document.title=C.document.body.innerText="downloading..."),typeof p=="string")return t(p,g,z);var $=p.type==="application/octet-stream",Xt=/constructor/i.test(r.HTMLElement)||r.safari,lt=/CriOS\/[\d]+/.test(navigator.userAgent);if((lt||$&&Xt||d)&&typeof FileReader<"u"){var Ze=new FileReader;Ze.onloadend=function(){var be=Ze.result;be=lt?be:be.replace(/^data:[^;]*;/,"data:attachment/file;"),C?C.location.href=be:location=be,C=null},Ze.readAsDataURL(p)}else{var dt=r.URL||r.webkitURL,et=dt.createObjectURL(p);C?C.location=et:location.href=et,C=null,setTimeout(function(){dt.revokeObjectURL(et)},4e4)}});r.saveAs=w.saveAs=w,typeof st<"u"&&(st.exports=w)})});var Gt={_id:"",username:"",email:"",analytics:{files:0,folders:0,totalSize:"0 MB",maxCloudSize:"0 MB"}};var qe=class a{authService=u(Ct);userService=u(Ae);maskLoad=x(!1);user=x(K({},Gt));$subUser;constructor(){}ngOnInit(){if(window.innerWidth>764){let n=document.querySelector(".sidebar"),r=document.querySelector("#btn");n.classList.add("open"),r.classList.replace("bx-menu","bx-menu-alt-right")}let e=this.authService.getAuth();this.user.set(e.user),this.$subUser=this.userService.userProfile.pipe(ct(()=>this.userService.getProfile())).subscribe(n=>{this.user.set(n)})}ngOnDestroy(){this.$subUser.unsubscribe()}menuToggle(t=!1){let e=document.querySelector(".sidebar");t?e.classList.add("open"):e.classList.toggle("open"),this.menuBtnChange(),t||this.removeAnalytics()}menuBtnChange(){let t=document.querySelector(".sidebar"),e=document.querySelector("#btn");t.classList.contains("open")?e.classList.replace("bx-menu","bx-menu-alt-right"):e.classList.replace("bx-menu-alt-right","bx-menu")}logout(){this.maskLoad.set(!0),setTimeout(()=>{c.info("Goodbye!",""),this.maskLoad.set(!1),this.authService.logout()},500)}collapseAnalitycs(){this.menuToggle(!0);let t=document.querySelector(".collapse-analytics"),e=document.querySelector(".bxs-chevron-down");t.classList.contains("collapse")?(e.classList.remove("collapseIcon"),e.classList.add("collapseIconBack")):(e.classList.add("collapseIcon"),e.classList.remove("collapseIconBack")),t.classList.toggle("collapse")}removeAnalytics(){let t=document.querySelector(".collapse-analytics"),e=document.querySelector(".bxs-chevron-down");e.classList.remove("collapseIcon"),e.classList.remove("collapseIconBack"),t.classList.remove("collapse")}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=S({type:a,selectors:[["app-dashboard"]],decls:59,vars:6,consts:[[1,"sidebar"],[1,"logo-details"],[1,"fa-solid","fa-cloud-arrow-up","icon"],[1,"logo_name"],["id","btn",1,"bx","bx-menu",3,"click"],[1,"nav-list"],["routerLink","/"],[1,"bx","bx-grid-alt"],[1,"links_name"],[1,"tooltip"],["routerLink","/all/folders"],[1,"bx","bx-folder"],["routerLink","/all/files"],[1,"bx","bx-file"],[1,"analitycs",3,"click"],[1,"bx","bx-pie-chart-alt-2"],[1,"bx","bxs-chevron-down"],[1,"collapse-analytics"],[1,"analytic"],[1,"title"],[1,"title","last"],[1,"profile"],[1,"profile-details"],[1,"name"],["id","log_out",1,"bx","bx-log-out",3,"click"],[1,"home-section"],[3,"show"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1),M(2,"i",2),o(3,"div",3),s(4,"SenntCloud"),i(),o(5,"i",4),m("click",function(){return n.menuToggle()}),i()(),o(6,"ul",5)(7,"li")(8,"a",6),M(9,"i",7),o(10,"span",8),s(11,"Dashboard"),i()(),o(12,"span",9),s(13,"Dashboard"),i()(),o(14,"li")(15,"a",10),M(16,"i",11),o(17,"span",8),s(18,"All Folders"),i()(),o(19,"span",9),s(20,"All Folders"),i()(),o(21,"li")(22,"a",12),M(23,"i",13),o(24,"span",8),s(25,"All Files"),i()(),o(26,"span",9),s(27,"All Files"),i()(),o(28,"li")(29,"a",14),m("click",function(){return n.collapseAnalitycs()}),M(30,"i",15),o(31,"span",8),s(32,"Analytics"),i(),M(33,"i",16),i(),o(34,"span",9),s(35,"Analytics"),i()(),o(36,"div",17)(37,"div",18)(38,"p",19),s(39),i()(),o(40,"div",18)(41,"p",19),s(42),i()(),o(43,"div",18)(44,"p",19),s(45),i()(),o(46,"div",18)(47,"p",20),s(48),i()()(),o(49,"li",21)(50,"div",22)(51,"div",23),s(52),i()(),o(53,"i",24),m("click",function(){return n.logout()}),i(),o(54,"span",9),s(55,"Logout"),i()()()(),o(56,"section",25),M(57,"router-outlet"),i(),M(58,"app-loading",26)),e&2&&(l(39),j("Space avaible: ",n.user().analytics.maxCloudSize),l(3),j("Space used: ",n.user().analytics.totalSize),l(3),j("Folders: ",n.user().analytics.folders),l(3),j("Files: ",n.user().analytics.files),l(4),_(n.user().username),l(6),h("show",n.maskLoad()))},dependencies:[y,k,E,D,I,L,F,T,B,A,U,R,N,_e,_t,Te,Fe],styles:[".sidebar[_ngcontent-%COMP%]{position:fixed;left:0;top:0;height:100%;width:78px;background:#11101d;padding:6px 14px;z-index:99;transition:all .5s ease}.sidebar.open[_ngcontent-%COMP%]{width:250px}.sidebar[_ngcontent-%COMP%]   .logo-details[_ngcontent-%COMP%]{height:60px;display:flex;align-items:center;position:relative}.sidebar[_ngcontent-%COMP%]   .logo-details[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{opacity:0;transition:all .5s ease}.sidebar[_ngcontent-%COMP%]   .logo-details[_ngcontent-%COMP%]   .logo_name[_ngcontent-%COMP%]{color:#fff;font-size:20px;font-weight:600;opacity:0;transition:all .5s ease}.sidebar.open[_ngcontent-%COMP%]   .logo-details[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .sidebar.open[_ngcontent-%COMP%]   .logo-details[_ngcontent-%COMP%]   .logo_name[_ngcontent-%COMP%]{opacity:1}.sidebar[_ngcontent-%COMP%]   .logo-details[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]{position:absolute;top:50%;right:0;transform:translateY(-50%);font-size:22px;transition:all .4s ease;font-size:23px;text-align:center;cursor:pointer;transition:all .5s ease}.sidebar.open[_ngcontent-%COMP%]   .logo-details[_ngcontent-%COMP%]   #btn[_ngcontent-%COMP%]{text-align:right}.sidebar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;height:60px;min-width:50px;font-size:28px;text-align:center;line-height:60px}.sidebar.open[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i.bxs-chevron-down[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i.bxs-chevron-down[_ngcontent-%COMP%]{margin-left:auto;opacity:0;pointer-events:none}.sidebar[_ngcontent-%COMP%]   .nav-list[_ngcontent-%COMP%]{margin-top:20px;height:100%;padding-left:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;margin:8px 0;list-style:none;cursor:pointer}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]{position:absolute;top:-20px;left:calc(100% + 15px);z-index:3;background:#fff;box-shadow:0 5px 10px #0000004d;padding:6px 12px;border-radius:4px;font-size:15px;font-weight:400;opacity:0;white-space:nowrap;pointer-events:none;transition:0s}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   .tooltip[_ngcontent-%COMP%]{opacity:1;pointer-events:auto;transition:all .4s ease;top:50%;transform:translateY(-50%)}.sidebar.open[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]{display:none}.sidebar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:15px;color:#fff;font-weight:400;outline:none;height:50px;width:100%;width:50px;border:none;border-radius:12px;transition:all .5s ease;background:#1d1b31}.sidebar.open[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:0 20px 0 50px;width:100%}.sidebar[_ngcontent-%COMP%]   .bx-search[_ngcontent-%COMP%]{position:absolute;top:50%;left:0;transform:translateY(-50%);font-size:22px;background:#1d1b31;color:#fff}.sidebar.open[_ngcontent-%COMP%]   .bx-search[_ngcontent-%COMP%]:hover{background:#1d1b31;color:#fff}.sidebar[_ngcontent-%COMP%]   .bx-search[_ngcontent-%COMP%]:hover{background:#fff;color:#11101d}.sidebar[_ngcontent-%COMP%]   .analitycs[_ngcontent-%COMP%]{cursor:pointer}.sidebar[_ngcontent-%COMP%]   .collapse-analytics[_ngcontent-%COMP%]{color:#fff;padding:0 35px;display:none;opacity:0;transform:translateY(-20px);animation:_ngcontent-%COMP%_fadeInFromTop .5s forwards}.sidebar[_ngcontent-%COMP%]   .collapse-analytics.collapse[_ngcontent-%COMP%]{display:block}@keyframes _ngcontent-%COMP%_fadeInFromTop{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i.bxs-chevron-down.collapseIcon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotate180 .5s forwards}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i.bxs-chevron-down.collapseIconBack[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotateBack .5s forwards}@keyframes _ngcontent-%COMP%_rotate180{0%{transform:rotate(0)}to{transform:rotate(180deg)}}@keyframes _ngcontent-%COMP%_rotateBack{0%{transform:rotate(180deg)}to{transform:rotate(0)}}.sidebar[_ngcontent-%COMP%]   .collapse-analytics[_ngcontent-%COMP%]   .analytic[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;padding-bottom:5px;margin-bottom:5px}.sidebar[_ngcontent-%COMP%]   .collapse-analytics[_ngcontent-%COMP%]   .analytic[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:not(.last){border-bottom:1px solid #fff}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;height:100%;width:100%;border-radius:12px;align-items:center;text-decoration:none;transition:all .4s ease;background:#11101d}.sidebar[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   i#log_out[_ngcontent-%COMP%]:hover, .sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#fff}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .links_name[_ngcontent-%COMP%]{color:#fff;font-size:15px;font-weight:400;white-space:nowrap;opacity:0;pointer-events:none;transition:.4s}.sidebar.open[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .links_name[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}.sidebar[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover, .sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .links_name[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transition:all .5s ease;color:#11101d}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{height:50px;line-height:50px;font-size:18px;border-radius:12px}.sidebar[_ngcontent-%COMP%]   li.profile[_ngcontent-%COMP%]{position:fixed;height:60px;width:78px;left:0;bottom:-8px;padding:10px 14px;background:#1d1b31;transition:all .5s ease}.sidebar.open[_ngcontent-%COMP%]   li.profile[_ngcontent-%COMP%]{width:250px}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .profile-details[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:nowrap}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:45px;width:45px;object-fit:cover;border-radius:6px;margin-right:10px}.sidebar[_ngcontent-%COMP%]   li.profile[_ngcontent-%COMP%]{display:flex}.sidebar[_ngcontent-%COMP%]   li.profile[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   li.profile[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]{font-size:15px;font-weight:400;color:#fff;white-space:nowrap}.sidebar[_ngcontent-%COMP%]   li.profile[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]{font-size:12px}.sidebar[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   #log_out[_ngcontent-%COMP%]{position:absolute;top:50%;right:0;transform:translateY(-50%);background:#1d1b31;width:100%;height:60px;line-height:60px;border-radius:0;transition:all .5s ease;cursor:pointer}.sidebar.open[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   #log_out[_ngcontent-%COMP%]{width:50px;background:none}.home-section[_ngcontent-%COMP%]{position:relative;background:#e4e9f7;min-height:100vh;top:0;left:78px;width:calc(100% - 78px);transition:all .5s ease;z-index:2}.sidebar.open[_ngcontent-%COMP%] ~ .home-section[_ngcontent-%COMP%]{left:250px;width:calc(100% - 250px)}.home-section[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:inline-block;color:#11101d;font-size:25px;font-weight:500;margin:18px}@media (max-width: 420px){.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .tooltip[_ngcontent-%COMP%]{display:none}}"]})};var at={default:"fa-file",txt:"fa-file-alt",doc:"fa-file-word",docx:"fa-file-word",xls:"fa-file-excel",xlsx:"fa-file-excel",ppt:"fa-file-powerpoint",pptx:"fa-file-powerpoint",pdf:"fa-file-pdf",zip:"fa-file-archive",rar:"fa-file-archive","7z":"fa-file-archive",jpg:"fa-file-image",jpeg:"fa-file-image",png:"fa-file-image",gif:"fa-file-image",mp3:"fa-file-audio",wav:"fa-file-audio",mp4:"fa-file-video",avi:"fa-file-video",mkv:"fa-file-video"};var Y=class a{url=`${Be.url_api}/cloud`;reloadDashboardSubject=new ve;reloadDashboard$=this.reloadDashboardSubject.asObservable();http=u(Le);constructor(){}openDir(t){return this.http.get(`${this.url}/openDir/${t}`)}reloadDashboard(t){this.reloadDashboardSubject.next(t)}static \u0275fac=function(e){return new(e||a)};static \u0275prov=ue({token:a,factory:a.\u0275fac,providedIn:"root"})};var Q=class a{url=`${Be.url_api}/cloud`;http=u(Le);constructor(){}uploadFile(t,e){let n=new FormData;for(let d in t)t.hasOwnProperty(d)&&n.append("files",t[d]);n.append("path",decodeURI(e));let r=new ve;return this.http.post(`${this.url}/uploadFile/${decodeURI(e)}`,n,{reportProgress:!0,observe:"events"}).subscribe(d=>{switch(d.type){case we.UploadProgress:let w=d.total?Math.round(100*d.loaded/d.total):0;r.next({progress:w});break;case we.Response:r.next({progress:100,event:d.body}),r.complete();break}}),r.asObservable()}createFolder(t,e){return this.http.post(`${this.url}/createDir/${decodeURI(e)}`,{name:t})}downloadFile(t){let e=new ve;return this.http.get(`${this.url}/downloadFile/${decodeURI(t)}`,{responseType:"blob",reportProgress:!0,observe:"events"}).subscribe(n=>{switch(n.type){case we.DownloadProgress:let r=n.total?Math.round(100*n.loaded/n.total):0;e.next({progress:r});break;case we.Response:e.next({progress:100,file:n.body}),e.complete();break}}),e.asObservable()}deleteFile(t){return this.http.delete(`${this.url}/delete/${decodeURI(t)}`)}rename(t,e){return this.http.post(this.url+"/rename/"+decodeURI(e),{name:t})}copy(t,e,n){return this.http.post(this.url+"/copy/"+decodeURI(t),{newPath:e,isFile:n})}move(t,e,n){return this.http.post(this.url+"/move/"+decodeURI(t),{newPath:e,isFile:n})}getAllFiles(){return this.http.get(this.url+"/all/files")}getAllFolders(){return this.http.get(this.url+"/all/folders")}static \u0275fac=function(e){return new(e||a)};static \u0275prov=ue({token:a,factory:a.\u0275fac,providedIn:"root"})};var Ge=class a{snackBarRef=u(Ht);progressDownload=x(0);downloadingText=x("Downloading...");constructor(){}closeSnackBar(){this.snackBarRef.dismiss()}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=S({type:a,selectors:[["app-download-snack-bar"]],decls:6,vars:3,consts:[[1,"snack-bar-container"],[1,"downloadText"],["mode","determinate",3,"value"],[1,"progressText"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"span",1),s(2),i(),M(3,"mat-progress-bar",2),o(4,"span",3),s(5),i()()),e&2&&(l(2),_(n.downloadingText()),l(),h("value",n.progressDownload()),l(2),j("",n.progressDownload(),"%"))},dependencies:[y,k,E,D,I,L,F,He,T,B,A,U,R,N],styles:[".snack-bar-container[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#fff;color:#000;border-radius:4px}.icon-close[_ngcontent-%COMP%]{font-size:20px;margin-left:15px;cursor:pointer}mat-progress-bar[_ngcontent-%COMP%]{flex-grow:1;margin-left:10px}.downloadText[_ngcontent-%COMP%]{font-weight:500;margin-right:10px}.progressText[_ngcontent-%COMP%]{margin-left:10px}"]})};var Qt=Zt(Yt());var on=["class","component"];function an(a,t){if(a&1&&(o(0,"span",3),s(1),i()),a&2){let e=f();l(),_(e.data.ext)}}var Ce=class a{constructor(t,e){this.dialogRef=t;this.data=e}close(){this.dialogRef.close()}create(){if(!this.data.name.trim()||this.data.name.trim()==""){c.error("Enter a name",""),this.data.name="";return}document.getElementById("create")?.click()}static \u0275fac=function(e){return new(e||a)(nt(Rt),nt(Ut))};static \u0275cmp=S({type:a,selectors:[["app-input-modal",8,"component"]],attrs:on,decls:14,vars:7,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["cdkFocusInitial","","matInput","",3,"ngModelChange","ngModel"],[2,"margin-left","5px"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","id","create",2,"display","none",3,"mat-dialog-close"]],template:function(e,n){e&1&&(o(0,"h1",0),s(1),i(),o(2,"div",1)(3,"p"),s(4),i(),o(5,"input",2),ke("ngModelChange",function(d){return ye(n.data.name,d)||(n.data.name=d),d}),i(),O(6,an,2,1,"span",3),i(),o(7,"div",4)(8,"button",5),m("click",function(){return n.close()}),s(9,"Cancel"),i(),o(10,"button",5),m("click",function(){return n.create()}),s(11),i(),o(12,"button",6),s(13),i()()),e&2&&(l(),_(n.data.textDesc),l(3),_(n.data.textTitle),l(),Pe("ngModel",n.data.name),l(),P(n.data.ext&&n.data.ext!=""?6:-1),l(5),_(n.data.textBtn),l(),h("mat-dialog-close",n.data.name),l(),_(n.data.textBtn))},dependencies:[y,k,E,Ve,D,I,L,F,T,B,A,Nt,Vt,zt,jt,U,$t,R,N,Ne,xt,Re,Ue],encapsulation:2})};var Ye={show:!1,path:"",name:"",type:"copy",isFile:!1};var xe=class a{_infoActual=x(K({},Ye));infoActual=this._infoActual.asReadonly();setInfo(t){this._infoActual.set(t)}static \u0275fac=function(e){return new(e||a)};static \u0275prov=ue({token:a,factory:a.\u0275fac,providedIn:"root"})};function rn(a,t){if(a&1){let e=V();o(0,"button",4),m("click",function(){b(e);let r=f();return v(r.download())}),o(1,"mat-icon"),s(2,"download"),i(),o(3,"span"),s(4,"Download"),i()()}if(a&2){let e=f();h("disabled",e.downloading())}}var Qe=class a{cloudService=u(Q);actionsService=u(xe);_snackBar=u(Wt);dialog=u(We);dashBoardService=u(Y);isFile=X(!1);path=X("");name=X("");maskLoad=X(!1);downloading=X(!1);downloadEvent=Mt();progressDownload=0;constructor(){}download(){let t=this._snackBar.openFromComponent(Ge,{duration:0,horizontalPosition:"right",verticalPosition:"top",panelClass:["white-snack-bar"]}),e=this.path()+"/"+this.name();this.downloadEvent.emit(!0),this.cloudService.downloadFile(e).subscribe({next:n=>{this.progressDownload=n.progress;let r=t.instance;if(r.progressDownload.set(this.progressDownload),n.file){let d=new Blob([n.file]);(0,Qt.saveAs)(d,this.name()),r.downloadingText.set("Downloaded"),this.downloadEvent.emit(!1),setTimeout(()=>{t.dismiss()},3e3)}},error:n=>{c.error("Error downloading file, please report.",""),this.downloadEvent.emit(!1)},complete:()=>{this.progressDownload=0,this.downloadEvent.emit(!1)}})}deleteFile(){let t=this.path()+"/"+this.name();this.dialog.open(qt,{width:"250px",data:{title:"Delete",message:`Confirm deleting "${this.name()}"`}}).afterClosed().subscribe(n=>{n?.confirmed&&(c.setOption("timeOut","0"),c.info("Deleting...",""),this.cloudService.deleteFile(t).subscribe({next:r=>{c.setDefaultsOptions(),c.clear(),c.success(r.message,""),this.dashBoardService.reloadDashboard(!0)},error:()=>{c.clear(),c.error("Error unexpected","")}}))})}rename(){let t=this.name(),e=t.lastIndexOf("."),n="",r="";e!==-1&&e!==0&&this.isFile()?(n=t.substring(0,e),r="."+t.substring(e+1)):n=t,this.dialog.open(Ce,{data:{name:n,textDesc:this.isFile()?"Rename file":"Rename folder",textTitle:"Enter new name",textBtn:"Edit",ext:r}}).afterClosed().subscribe(w=>{if(w&&w.trim()!=""){if(w.trim().length>35){c.error("New name max 35 letters","");return}let p=this.path()+"/"+this.name(),g=this.isFile()?w+r:w;c.setOption("timeOut","0"),c.info("Editing...",""),this.cloudService.rename(g,p).subscribe({next:z=>{c.setDefaultsOptions(),c.clear(),c.success("Rename successful",""),this.dashBoardService.reloadDashboard(!0)},error:z=>{c.setDefaultsOptions(),c.clear(),c.error(z.error.message,"")}})}})}setAction(t){this.actionsService.setInfo({show:!0,path:this.path()+"/"+this.name(),name:this.name(),type:t,isFile:this.isFile()})}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=S({type:a,selectors:[["app-actions"]],inputs:{isFile:[1,"isFile"],path:[1,"path"],name:[1,"name"],maskLoad:[1,"maskLoad"],downloading:[1,"downloading"]},outputs:{downloadEvent:"downloadEvent"},decls:26,vars:2,consts:[["menu","matMenu"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled"],["mat-menu-item","",3,"click","disabled"]],template:function(e,n){if(e&1){let r=V();o(0,"button",1)(1,"mat-icon"),s(2,"more_vert"),i()(),o(3,"mat-menu",null,0)(5,"button",2),m("click",function(){return b(r),v(n.rename())}),o(6,"mat-icon"),s(7,"edit"),i(),o(8,"span"),s(9,"Rename"),i()(),o(10,"button",2),m("click",function(){return b(r),v(n.setAction("move"))}),o(11,"mat-icon"),s(12,"drive_file_move"),i(),o(13,"span"),s(14,"Move"),i()(),o(15,"button",2),m("click",function(){return b(r),v(n.setAction("copy"))}),o(16,"mat-icon"),s(17,"file_copy"),i(),o(18,"span"),s(19,"Copy"),i()(),o(20,"button",2),m("click",function(){return b(r),v(n.deleteFile())}),o(21,"mat-icon"),s(22,"delete"),i(),o(23,"span"),s(24,"Delete"),i()(),O(25,rn,5,1,"button",3),i()}if(e&2){let r=ft(4);h("matMenuTriggerFor",r),l(25),P(n.isFile()?25:-1)}},dependencies:[y,ge,k,vt,bt,wt,E,St,D,I,L,F,T,B,A,U,R,N],styles:[".actions[_ngcontent-%COMP%]{width:25px;display:flex;justify-content:center;cursor:pointer;border-radius:20px;height:25px;align-items:center}.actions[_ngcontent-%COMP%]:hover{background:#ccc}.dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.dropdown-content[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#f1f1f1;min-width:160px;box-shadow:0 8px 16px #0003;z-index:1}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;padding:12px 16px;text-decoration:none;display:block}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ddd}.show[_ngcontent-%COMP%]{display:block}"]})};var Ke=class a{_bottomSheetRef=u(Pt);constructor(){}choose(t){this._bottomSheetRef.dismiss(t)}close(){this._bottomSheetRef.dismiss()}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=S({type:a,selectors:[["app-bottom-sheet"]],decls:11,vars:0,consts:[["mat-list-item","",1,"btn-option-bs",3,"click"],["matListItemTitle",""],["matLine",""]],template:function(e,n){e&1&&(o(0,"mat-nav-list")(1,"a",0),m("click",function(){return n.choose("folder")}),o(2,"span",1),s(3,"Folder"),i(),o(4,"span",2),s(5,"Create a new folder"),i()(),o(6,"a",0),m("click",function(){return n.choose("file")}),o(7,"span",1),s(8,"File"),i(),o(9,"span",2),s(10,"Upload new file"),i()()())},dependencies:[y,k,E,D,I,kt,he,Me,L,F,T,B,A,U,R,N],encapsulation:2})};var ln=["expansionPanel"],dn=a=>({color:a});function cn(a,t){if(a&1&&M(0,"mat-progress-bar",5),a&2){let e=f();h("value",e.progressUpload().value)}}function pn(a,t){if(a&1){let e=V();o(0,"mat-icon",8),m("click",function(){b(e);let r=f();return v(r.closeAccordion())}),s(1,"close"),i()}}function mn(a,t){a&1&&(o(0,"p"),s(1,"Uploading files, please wait a moment"),i())}function un(a,t){if(a&1&&(o(0,"mat-list-item")(1,"mat-icon",9),s(2),i(),o(3,"div",10),s(4),i(),o(5,"div",11),s(6),i()()),a&2){let e=t.$implicit;l(),h("ngStyle",Ee(4,dn,e.status==200?"#0f9b0f":"#af1313")),l(),_(e.status==200?"check":"close"),l(2),_(e.name),l(2),_(e.message)}}var Xe=class a{_bottomSheet=u(yt);dialog=u(We);cloudService=u(Q);dashBoardService=u(Y);expansionPanel;path=X("");maskLoad=X(!1);selectedOption=x(null);panelOpenState=x(!1);progressUpload=x({text:"Uploading...",value:0,loading:!0,uploaded:[]});constructor(){}openBottomSheet(){this._bottomSheet.open(Ke).afterDismissed().subscribe(e=>{e&&(this.selectedOption.set(e),e=="folder"?this.newFolderModal():document.getElementById("file")?.click())})}newFolderModal(){this.dialog.open(Ce,{data:{name:"",textDesc:"Create new folder",textTitle:"Enter a folder name",textBtn:"Create"}}).afterClosed().subscribe(e=>{e&&e.trim()!=""&&this.createFolder(e)})}createFolder(t){if(t.trim().length>35){c.error("File name max 35 letters","");return}this.cloudService.createFolder(t.trim(),this.path()).subscribe({next:e=>{c.success(e.message,"Successful"),this.dashBoardService.reloadDashboard(!0)},error:e=>{c.error(e.error.message,"Error")}})}uploadFile(t){let e=t.target.files;this.progressUpload.set({loading:!0,value:0,text:"Uploading...",uploaded:[]}),this.expansionPanel.close(),document.getElementById("accordion-uploading")?.classList.add("show"),this.cloudService.uploadFile(e,this.path()).subscribe({next:n=>{n?.event?(this.progressUpload.update(r=>tt(K({},r),{uploaded:n?.event.responses,text:"Finished",loading:!1})),this.expansionPanel.open(),this.dashBoardService.reloadDashboard(!0),c.info("Process finished!","")):this.progressUpload.update(r=>tt(K({},r),{value:n.progress}))},error:n=>{c.error(n.error.message,"Error uploading files")},complete:()=>{let n=document.getElementById("file");n.value=""}})}closeAccordion(){document.getElementById("accordion-uploading")?.classList.remove("show")}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=S({type:a,selectors:[["app-upload"]],viewQuery:function(e,n){if(e&1&&pt(ln,7),e&2){let r;mt(r=ut())&&(n.expansionPanel=r.first)}},inputs:{path:[1,"path"],maskLoad:[1,"maskLoad"]},decls:18,vars:4,consts:[["expansionPanel",""],[1,"button-container"],["mat-fab","","color","primary",1,"button_upload",3,"click"],["id","accordion-uploading"],[3,"opened","closed"],["mode","determinate",3,"value"],[1,"icon-close-upload"],["type","file","name","file","id","file","multiple","true",3,"change"],[1,"icon-close-upload",3,"click"],["matListItemIcon","",3,"ngStyle"],["matListItemTitle",""],["matListItemLine","",1,"message-uploaded"]],template:function(e,n){if(e&1){let r=V();o(0,"div",1)(1,"button",2),m("click",function(){return b(r),v(n.openBottomSheet())}),o(2,"mat-icon"),s(3,"add"),i()(),o(4,"mat-accordion",3)(5,"mat-expansion-panel",4,0),m("opened",function(){return b(r),v(n.panelOpenState.set(!0))})("closed",function(){return b(r),v(n.panelOpenState.set(!1))}),o(7,"mat-expansion-panel-header")(8,"mat-panel-title"),s(9),i(),o(10,"mat-panel-description"),O(11,cn,1,1,"mat-progress-bar",5),O(12,pn,2,0,"mat-icon",6),i()(),O(13,mn,2,0,"p"),o(14,"mat-list"),q(15,un,7,6,"mat-list-item",null,J),i()()()(),o(17,"input",7),m("change",function(w){return b(r),v(n.uploadFile(w))}),i()}e&2&&(l(9),j(" ",n.progressUpload().text," "),l(2),P(n.progressUpload().loading?11:-1),l(),P(n.progressUpload().loading?-1:12),l(),P(n.progressUpload().loading?13:-1),l(2),G(n.progressUpload().uploaded))},dependencies:[y,ge,k,E,Ot,D,I,$e,he,ze,je,Me,L,Ft,Et,Dt,Lt,It,F,He,T,B,A,U,R,N,Ie,De],styles:[".button-container[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px;display:flex;flex-direction:column;align-items:end;gap:10px}.button_upload[_ngcontent-%COMP%]{background:#2d2c2c;color:#fff;border-radius:50%}#accordion-uploading[_ngcontent-%COMP%]{display:none;max-height:300px;max-width:250px;overflow:auto;box-shadow:0 0 6px #bdbdbd}#accordion-uploading.show[_ngcontent-%COMP%]{display:block}#file[_ngcontent-%COMP%]{opacity:0;position:absolute;top:-100px}.icon-close-upload[_ngcontent-%COMP%]{margin-left:auto}.message-uploaded[_ngcontent-%COMP%]{overflow-x:auto;text-overflow:unset}@media (min-width: 768px){#accordion-uploading[_ngcontent-%COMP%]{max-height:400px;max-width:350px}}"]})};var fn=a=>({display:a}),Je=class a{actionsService=u(xe);cloudService=u(Q);dashBoardService=u(Y);info=this.actionsService.infoActual;cancel(){this.actionsService.setInfo(K({},Ye))}confirm(){let t=decodeURI(window.location.pathname);t.startsWith("/r")&&(t=t.slice(2));let e=this.info().type=="copy",n=e?this.cloudService.copy(this.info().path,t,this.info().isFile):this.cloudService.move(this.info().path,t,this.info().isFile);this.cancel(),c.setOption("timeOut","0"),c.info(e?"Copying...":"Moving...",""),n.subscribe({next:r=>{c.setDefaultsOptions(),c.clear(),c.success(r.message,""),this.dashBoardService.reloadDashboard(!0)},error:r=>{c.setDefaultsOptions(),c.clear(),c.error(r.error.message,"")}})}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=S({type:a,selectors:[["app-modal-action"]],decls:12,vars:6,consts:[[1,"container",3,"ngStyle"],[1,"header"],[1,"texts"],[1,"title"],[1,"exit",3,"click"],[1,"text"],[1,"btns"],["matButton","","color","primary",3,"click"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),s(4),i(),o(5,"div",4),m("click",function(){return n.cancel()}),s(6,"x"),i()(),o(7,"p",5),s(8),i()(),o(9,"div",6)(10,"button",7),m("click",function(){return n.confirm()}),s(11,"Confirmar"),i()()()),e&2&&(h("ngStyle",Ee(4,fn,n.info().show?"block":"none")),l(4),gt("",n.info().type=="copy"?"Copiar":"Mover"," (",n.info().name,")"),l(4),j("Muevete hacia la carpeta que deseas ",n.info().type=="copy"?"copiar":"mover"," y da click en confirmar!"))},dependencies:[y,k,E,Ve,D,I,L,F,T,B,A,U,R,N,Ie,De],styles:[".container[_ngcontent-%COMP%]{display:none;background:#fff;z-index:100;max-width:200px;width:95%;padding:15px 15px 5px;box-shadow:0 0 6px #ccc;border-radius:10px;margin:10px auto}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .texts[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;width:100%;overflow:hidden;text-overflow:ellipsis}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:15px}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .exit[_ngcontent-%COMP%]{cursor:pointer;height:fit-content}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .exit[_ngcontent-%COMP%]:hover{color:#b41111}@media (min-width: 768px){.container[_ngcontent-%COMP%]{position:fixed;top:10px;right:10px;width:100%;max-width:300px;box-shadow:0 8px 10px -5px #0003,0 16px 24px 2px #00000024,0 6px 30px 5px #0000001f}}"]})};var gn=["class","component"];function Mn(a,t){if(a&1&&(o(0,"div")(1,"span"),s(2,"/ "),i(),o(3,"a",13),s(4),i()()),a&2){let e=t.$implicit,n=f();l(3),h("routerLink",n.decodeURL(e.link)),l(),_(n.decodeURL(e.path))}}function hn(a,t){if(a&1){let e=V();o(0,"div",16)(1,"div",20),m("click",function(){let r=b(e).$implicit,d=f(2);return v(d.navigateFolder(r.name))}),o(2,"span",21),M(3,"i",22),i(),o(4,"p",23),s(5),i()(),M(6,"app-actions",24),i()}if(a&2){let e=t.$implicit,n=f(2);l(),h("title",H(e)),l(4),_(e.name),l(),h("name",H(e.name))("path",H(n.path()))("maskLoad",n.maskLoad())}}function _n(a,t){if(a&1){let e=V();o(0,"div",19)(1,"div",25)(2,"span",21),M(3,"i"),i(),o(4,"p",23),s(5),i()(),o(6,"app-actions",26),m("downloadEvent",function(r){b(e);let d=f(2);return v(d.downloadEvent(r))}),i()()}if(a&2){let e=t.$implicit,n=f(2);l(),h("title",H(e)),l(2),ot(it("fas ",n.getIcon(e.name))),l(2),_(e.name),l(),h("name",H(e.name))("path",H(n.path()))("downloading",n.downloading())("maskLoad",n.maskLoad())("isFile",!0)}}function Cn(a,t){if(a&1&&(o(0,"div",8)(1,"div",14)(2,"div",15),q(3,hn,7,8,"div",16,J),i()(),o(5,"div",17)(6,"div",18),q(7,_n,7,13,"div",19,J),i()()()),a&2){let e=f();l(3),G(e.data().content.directories),l(4),G(e.data().content.files)}}function xn(a,t){if(a&1){let e=V();o(0,"tr",34)(1,"td",35),m("click",function(){let r=b(e).$implicit,d=f(3);return v(d.navigateFolder(r.name))}),o(2,"span",21),M(3,"i",22),i()(),o(4,"td",36),m("click",function(){let r=b(e).$implicit,d=f(3);return v(d.navigateFolder(r.name))}),s(5),i(),o(6,"td",35),m("click",function(){let r=b(e).$implicit,d=f(3);return v(d.navigateFolder(r.name))}),s(7," \u2014 "),i(),o(8,"td",35),m("click",function(){let r=b(e).$implicit,d=f(3);return v(d.navigateFolder(r.name))}),s(9),i(),o(10,"td",37),M(11,"app-actions",38),i()()}if(a&2){let e=t.$implicit,n=f(3);l(5),_(e.name),l(4),_(n.getDate(e.createdAt)),l(2),h("name",H(e.name))("path",H(n.path()))("downloading",n.downloading())("maskLoad",n.maskLoad())}}function bn(a,t){if(a&1){let e=V();o(0,"table",28),m("matSortChange",function(r){b(e);let d=f(2);return v(d.sortDirectories(r))}),o(1,"tr"),M(2,"th",29),o(3,"th",30),s(4,"Name"),i(),o(5,"th",31),s(6,"Size"),i(),o(7,"th",32),s(8,"Date"),i(),o(9,"th",33),s(10,"Actions"),i()(),q(11,xn,12,8,"tr",34,J),i()}if(a&2){let e=f(2);l(11),G(e.sortedDirectories())}}function vn(a,t){if(a&1){let e=V();o(0,"tr",40)(1,"td")(2,"span",21),M(3,"i"),i()(),o(4,"td",41),s(5),i(),o(6,"td"),s(7),i(),o(8,"td"),s(9),i(),o(10,"td")(11,"app-actions",26),m("downloadEvent",function(r){b(e);let d=f(3);return v(d.downloadEvent(r))}),i()()()}if(a&2){let e=t.$implicit,n=f(3);l(3),ot(it("fas ",n.getIcon(e.name))),l(2),_(e.name),l(2),_(n.getSize(e.size)),l(2),_(n.getDate(e.createdAt)),l(2),h("name",H(e.name))("path",H(n.path()))("downloading",n.downloading())("maskLoad",n.maskLoad())("isFile",!0)}}function wn(a,t){if(a&1){let e=V();o(0,"table",28),m("matSortChange",function(r){b(e);let d=f(2);return v(d.sortFiles(r))}),o(1,"tr"),M(2,"th",29),o(3,"th",30),s(4,"Name"),i(),o(5,"th",39),s(6,"Size"),i(),o(7,"th",32),s(8,"Date"),i(),o(9,"th",33),s(10,"Actions"),i()(),q(11,vn,12,13,"tr",40,J),i()}if(a&2){let e=f(2);l(11),G(e.sortedFiles())}}function Sn(a,t){if(a&1&&(o(0,"div",9),O(1,bn,13,0,"table",27),O(2,wn,13,0,"table",27),i()),a&2){let e=f();l(),P(e.data().content.directories.length>0||e.loading()?1:-1),l(),P(e.data().content.files.length>0||e.loading()?2:-1)}}function On(a,t){a&1&&(o(0,"div",10),s(1," This folder is empty "),i())}function Pn(a,t){a&1&&(o(0,"div",10),s(1," Your drive is empty "),i())}function yn(a,t){if(a&1&&(o(0,"div",10),O(1,On,2,0,"div",10),O(2,Pn,2,0,"div",10),i()),a&2){let e=f();l(),P(e.data().path?1:-1),l(),P(e.data().path==""?2:-1)}}var Se=class a{router=u(fe);dashBoardService=u(Y);userService=u(Ae);maskLoad=x(!1);loading=x(!0);downloading=x(!1);path=x("");sortedDirectories=x([]);sortedFiles=x([]);viewTable=!0;reloadSubscription;urlSubscription;paths=x([]);data=x({path:"",content:{directories:[],files:[]}});decodeURL=t=>decodeURI(t);constructor(){window.innerWidth<768&&(this.viewTable=!1)}ngOnInit(){this.processURL(),this.urlSubscription=this.router.events.subscribe(t=>{t instanceof ht&&this.processURL()}),this.reloadSubscription=this.dashBoardService.reloadDashboard$.subscribe(t=>{this.newActionReload()})}ngOnDestroy(){this.urlSubscription.unsubscribe(),this.reloadSubscription.unsubscribe()}processURL(){let t=[],e=this.router.url.split("/").slice(2);e.forEach((n,r)=>{let d=e.slice(0,r+1).join("/"),w={path:n,link:`/r/${d}`};t.push(w)}),this.paths.set(this.router.url.split("/").length>2?t:[]),this.path.set(decodeURI(e.join("/"))),this.openDir()}getIcon(t){let e=t.split("."),n=e[e.length-1];return at[n]??at.default}navigateFolder(t){let e=this.path()+"/"+t;this.router.navigate([`/r/${e}`])}newActionReload(){this.openDir(),this.userService.userProfile.emit(!0)}compare(t,e,n){if(typeof t=="string"&&typeof e=="string"){let r=new Date(t),d=new Date(e);!isNaN(r.getTime())&&!isNaN(d.getTime())&&(t=r,e=d)}else t instanceof Date&&e instanceof Date&&(t=t.getTime(),e=e.getTime());return(t<e?-1:1)*(n?1:-1)}getDate(t){let e={day:"2-digit",month:"short",year:"numeric"},n=new Date(t);return new Intl.DateTimeFormat("es-ES",e).format(n)}getSize(t){if(t==0)return"0 MB";let e=(t/1024).toFixed(0);return e>=1024*1024?`${(e/1048576).toFixed(2)} GB`:e>=1024?`${(e/1024).toFixed(2)} MB`:`${e} KB`}sortDirectories(t){this.sortData(t,"directories")}sortFiles(t){this.sortData(t,"files")}sortData(t,e){let n=this.data().content[e].slice(),r=e=="files"?"sortedFiles":"sortedDirectories";if(!t||!t.active||t.direction===""){this[r].set(n);return}this[r].set(n.sort((d,w)=>{let p=t.direction==="asc";switch(t.active){case"name":return this.compare(d.name,w.name,p);case"size":return this.compare(d.size,w.size,p);case"date":return this.compare(d.createdAt,w.createdAt,p);default:return 0}}))}openDir(){this.maskLoad.set(!0),this.dashBoardService.openDir(this.path()).subscribe({next:t=>{this.data.set(t),this.sortDirectories(null),this.sortFiles(null)},error:t=>{c.error(`/${this.path()} - Forbidden.`,""),this.router.navigate(["/"])},complete:()=>{this.loading.set(!1),this.maskLoad.set(!1)}})}downloadEvent(t){this.downloading.set(t)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=S({type:a,selectors:[["app-cloud",8,"component"]],attrs:gn,decls:19,vars:7,consts:[[1,"dashboard"],[1,"pathDiv"],[1,"path"],["routerLink","/"],[1,"fas","fa-home"],[1,"data"],[3,"ngModelChange","ngModel"],[1,"actions-modal"],[1,"data-container"],[1,"data-container","view-table"],[1,"empty"],[3,"path","maskLoad"],[3,"show"],[1,"detail",3,"routerLink"],[1,"folders-container"],[1,"folders"],[1,"folder"],[1,"files-container"],[1,"files"],[1,"file"],["data-toggle","tooltip","data-placement","bottom",1,"folder-name",3,"click","title"],[1,"icon"],[1,"fas","fa-folder"],[1,"name"],[3,"maskLoad","name","path"],["data-toggle","tooltip","data-placement","bottom",1,"file-name",3,"title"],[3,"downloadEvent","downloading","maskLoad","name","path","isFile"],["matSort","",1,"table"],["matSort","",1,"table",3,"matSortChange"],["width","5%"],["width","45%","mat-sort-header","name"],["width","15%"],["width","15%","mat-sort-header","date"],["width","20%"],[1,"containerDir"],[1,"open",3,"click"],[1,"open","folder-name-text",3,"click"],[1,"no-open"],[3,"downloading","maskLoad","name","path"],["width","15%","mat-sort-header","size"],[1,"containerFiles"],[1,"folder-name-text"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),M(4,"i",4),i()(),q(5,Mn,5,2,"div",null,J),i(),o(7,"div",5)(8,"h2"),s(9," My unit "),o(10,"mat-slide-toggle",6),ke("ngModelChange",function(d){return ye(n.viewTable,d)||(n.viewTable=d),d}),s(11,"View Table"),i()(),o(12,"div",7),M(13,"app-modal-action"),i(),O(14,Cn,9,0,"div",8),O(15,Sn,3,2,"div",9),i(),O(16,yn,3,2,"div",10),M(17,"app-upload",11)(18,"app-loading",12),i()),e&2&&(l(5),G(n.paths()),l(5),Pe("ngModel",n.viewTable),l(4),P(n.viewTable?-1:14),l(),P(n.viewTable?15:-1),l(),P(n.data().content.directories.length<1&&n.data().content.files.length<1&&!n.loading()?16:-1),l(),h("path",n.path())("maskLoad",n.maskLoad()),l(),h("show",n.maskLoad()))},dependencies:[y,k,E,D,I,L,F,T,Tt,Bt,B,At,A,U,R,N,_e,Te,Fe,Ne,Re,Ue,Qe,Xe,Je],styles:[".dashboard[_ngcontent-%COMP%]{height:100vh;background:#fff;padding:20px;position:relative;border-radius:5px;overflow:hidden;display:grid;grid-template-rows:auto auto 1fr;width:100%;top:0;margin:0}.data[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;padding-bottom:10px;margin-bottom:10px}.data-container[_ngcontent-%COMP%]{height:calc(92vh - 100px);width:100%;overflow:auto}.data-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;color:#757575}.pathDiv[_ngcontent-%COMP%]{display:flex;gap:0 5px;font-size:17px}.files-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .folders-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:10px 0}.files[_ngcontent-%COMP%], .folders[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.file[_ngcontent-%COMP%], .folder[_ngcontent-%COMP%], .pathDiv[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#0000008a}.file-name[_ngcontent-%COMP%]:hover, .folder-name[_ngcontent-%COMP%]:hover, .pathDiv[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#00000061}.containerDir[_ngcontent-%COMP%]:hover{background:#d4d4d461;cursor:pointer}.containerDir[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{background:transparent}.no-open[_ngcontent-%COMP%]{background:#fff}.file[_ngcontent-%COMP%], .folder[_ngcontent-%COMP%]{display:grid;grid-template-columns:70% 1fr;width:200px;align-items:center;padding:0 12px;font-size:19px;height:50px;margin:0 5px 10px;border-radius:5px;overflow:hidden}.folder[_ngcontent-%COMP%]{cursor:pointer}.file[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .folder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:19px;width:100%;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.file-name[_ngcontent-%COMP%], .folder-name[_ngcontent-%COMP%]{display:flex;max-width:100%;height:100%;align-items:center;gap:15px}.empty[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-size:18px;position:absolute;top:50%;width:100%}.table[_ngcontent-%COMP%]{width:100%;font-size:15px}.folder-name-text[_ngcontent-%COMP%]{overflow-wrap:anywhere}@media (max-width: 768px){.data[_ngcontent-%COMP%]{overflow:auto}.data-container[_ngcontent-%COMP%]{width:100%}.data-container.view-table[_ngcontent-%COMP%]{width:calc(100vw - 78px)}}@media (min-width: 768px){.dashboard[_ngcontent-%COMP%]{width:90%;top:20px;margin:0 auto;height:92vh}}"]})};var Kt=(a,t)=>{let e=u(fe);return t.url=="/"?!0:t.url.split("/")[1]=="r"&&t.url.split("/").length<=2?(e.navigate(["/"]),!1):t.url.split("/")[1]=="r"?!0:(e.navigate([`/r${t.url}`]),!1)};var kn=["class","component"],En=(a,t)=>t.path;function Dn(a,t){if(a&1){let e=V();o(0,"mat-list-item",6),m("click",function(){let r=b(e).$implicit,d=f();return v(d.go("/"+r.path))}),o(1,"mat-icon",7),s(2),i(),o(3,"div",8),s(4),i(),o(5,"div",9),s(6),i()()}if(a&2){let e=t.$implicit,n=f();l(2),_(n.type()=="files"?"note":"folder"),l(2),j("/",e.path),l(2),_(e.name)}}function In(a,t){if(a&1&&(o(0,"div",4),s(1),i()),a&2){let e=f();l(),j(" There is no ",e.type(),"! ")}}var Oe=class a{cloudService=u(Q);router=u(fe);type=x(window.location.pathname.includes("files")?"files":"folders");data=x([]);loading=x(!1);constructor(){this.load()}load(){this.loading.set(!0),(this.type()=="files"?this.cloudService.getAllFiles():this.cloudService.getAllFolders()).subscribe({next:e=>{this.loading.set(!1),this.data.set(e)},error:e=>{this.loading.set(!1),c.error("Error unexpected!","")}})}go(t){this.router.navigate([t])}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=S({type:a,selectors:[["app-all",8,"component"]],attrs:kn,decls:11,vars:3,consts:[[1,"dashboard"],[1,"header"],[1,"list"],[1,"item"],[1,"text-empty"],[3,"show"],[1,"item",3,"click"],["matListItemIcon",""],["matListItemLine",""],["matListItemTitle",""]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),s(3),i(),M(4,"hr"),i(),o(5,"div",2)(6,"mat-list"),q(7,Dn,7,3,"mat-list-item",3,En),i()(),O(9,In,2,1,"div",4),M(10,"app-loading",5),i()),e&2&&(l(3),j(" All ",n.type()," - My Unit "),l(4),G(n.data()),l(2),P(!n.loading()&&n.data().length<=0?9:-1),l(),h("show",n.loading()))},dependencies:[y,ge,k,E,D,I,$e,he,ze,je,Me,L,F,T,B,A,U,R,N,_e],styles:[".dashboard[_ngcontent-%COMP%]{height:100vh;background:#fff;padding:20px;position:relative;border-radius:5px;overflow:hidden;display:grid;grid-template-rows:auto auto 1fr;width:100%;top:0;margin:0}.list[_ngcontent-%COMP%]{width:100%;overflow:auto}.item[_ngcontent-%COMP%]{cursor:pointer!important}.item[_ngcontent-%COMP%]:hover{background:#ebebeb}.text-empty[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}@media (min-width: 768px){.dashboard[_ngcontent-%COMP%]{width:90%;top:20px;margin:0 auto;height:92vh}}"]})};var ta=[{path:"",component:qe,children:[{path:"",component:Se},{path:"all/files",component:Oe},{path:"all/folders",component:Oe},{path:"**",component:Se,canActivate:[Kt]}]}];export{ta as DASHBOARD_ROUTES};
