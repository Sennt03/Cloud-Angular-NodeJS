import{E as q,K as V,M as G,P as j,R as O,Z as U,_ as W,a as M,aa as H,b as u,c as A,d as R,da as z,ea as J,f as k,g as L,h as T,i as F,k as I,m as N,q as P,u as B,x as D}from"./chunk-4VUJ7ITO.js";import{Da as d,Ea as c,Ia as _,Ja as t,Ka as r,La as m,Ra as v,Sb as E,Ta as h,Ub as x,Y as b,bc as y,cc as f,fb as a,ia as l,la as S,ma as p,n as X,qa as w}from"./chunk-YMTK67ZK.js";var be=["class","component"];function Se(i,e){i&1&&(t(0,"div"),a(1," *enter a valid email "),r())}function we(i,e){i&1&&(t(0,"div"),a(1," *required "),r())}function Ee(i,e){if(i&1&&(t(0,"div",16),d(1,Se,2,0,"div")(2,we,2,0,"div"),r()),i&2){let o=h();l(),c(o.hasError("email","email")?1:o.hasError("email","required")?2:-1)}}function xe(i,e){i&1&&(t(0,"div"),a(1," *must have at least 8 letters "),r())}function ye(i,e){i&1&&(t(0,"div"),a(1," *required "),r())}function Me(i,e){if(i&1&&(t(0,"div",16),d(1,xe,2,0,"div")(2,ye,2,0,"div"),r()),i&2){let o=h();l(),c(o.hasError("password","minlength")?1:o.hasError("password","required")?2:-1)}}var K=class i{constructor(e,o,n,s,g){this.renderer=e;this.router=o;this.route=n;this.formBuilder=s;this.authService=g;this.buildForm()}form;maskLoad=b(!1);buildForm(){this.form=this.formBuilder.group({email:["",[u.required,u.email]],password:["",[u.required,u.minLength(8)]]})}togglePasswordVisibility(){let e=this.renderer.selectRootElement("#password-input"),o=this.renderer.selectRootElement(".icon-password"),n=e.getAttribute("type")==="password"?"text":"password",s=e.getAttribute("type")==="password"?"fa-eye":"fa-eye-slash",g=e.getAttribute("type")==="password"?"fa-eye-slash":"fa-eye";this.renderer.setAttribute(e,"type",n),this.renderer.removeClass(o,s),this.renderer.addClass(o,g)}signup(){this.router.navigate(["../register"],{relativeTo:this.route})}hasError(e,o){return this.form.get(e).hasError(o)}haveErrors(e){return this.form.get(e).touched&&this.form.get(e).invalid}login(){if(!this.form.valid){this.form.markAllAsTouched();return}this.maskLoad.set(!0),this.authService.login(this.form.value).subscribe({next:e=>{f.success("Welcome!",""),this.maskLoad.set(!1),this.authService.saveAuth(e),this.form.markAsUntouched(),this.router.navigate(["/"])},error:e=>{this.maskLoad.set(!1),f.setOption("timeOut",3e3),window.innerWidth<768&&f.setOption("positionClass","toast-top-center"),f.error(e.error.message,"Failed Login"),f.setDefaultsOptions()}})}static \u0275fac=function(o){return new(o||i)(p(S),p(x),p(E),p(F),p(y))};static \u0275cmp=w({type:i,selectors:[["app-login",8,"component"]],attrs:be,decls:38,vars:4,consts:[[1,"auth"],[1,"container-xl"],[1,"row"],[1,"col-md-5","text_auth"],[1,"fondo"],["src","assets/images/auth/cloud_blanco.png","alt","",1,"logo"],[1,"circulo-container"],[1,"circulo"],[1,"ondas","morada"],[1,"ondas","rosa"],[1,"circulo","fondo"],[1,"col-md-7","form",3,"ngSubmit","formGroup"],[1,"text"],[1,"form-floating","form-floating-custom","mb-3"],["formControlName","email","type","text","id","input-username","placeholder","Enter Email",1,"form-control"],["for","input-username"],[1,"div-error"],[1,"form-floating","form-floating-custom","form-password","auth-pass-inputgroup","mb-3"],["formControlName","password","type","password","id","password-input","placeholder","Enter Password",1,"form-control"],["type","button","id","password-addon",1,"btn","btn-link","position-absolute","h-100","end-0","top-0",3,"click"],[1,"icon-password","fa-regular","fa-eye"],["for","input-password"],[1,"mt-4"],["type","submit",1,"btn","btn-dark","shadow-none","w-100"],[1,"mt-3","text-center"],[1,"mb-0","text-muted"],[1,"text-success","fw-bold","text-decoraton-underline","ms-1",3,"click"],[3,"show"]],template:function(o,n){o&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m(4,"div",4)(5,"img",5),t(6,"div",6)(7,"div",7),m(8,"span",8)(9,"span",9)(10,"span",10),r()()(),t(11,"form",11),v("ngSubmit",function(){return n.login()}),t(12,"div",12),a(13," Log in to "),t(14,"p"),a(15,"SenntCloud"),r()(),t(16,"div",13),m(17,"input",14),t(18,"label",15),a(19,"Email"),r(),d(20,Ee,3,1,"div",16),r(),t(21,"div",17),m(22,"input",18),t(23,"button",19),v("click",function(){return n.togglePasswordVisibility()}),m(24,"i",20),r(),t(25,"label",21),a(26,"Password"),r(),d(27,Me,3,1,"div",16),r(),t(28,"div",22)(29,"button",23),a(30,"Log In"),r()(),m(31,"hr"),t(32,"div",24)(33,"p",25),a(34,"Don't have an account ?"),t(35,"a",26),v("click",function(){return n.signup()}),a(36," Sign up "),r()()()()()()(),m(37,"app-loading",27)),o&2&&(l(11),_("formGroup",n.form),l(9),c(n.haveErrors("email")?20:-1),l(7),c(n.haveErrors("password")?27:-1),l(10),_("show",n.maskLoad()))},dependencies:[N,P,B,D,q,V,G,j,O,U,H,W,z,J,I,k,M,A,R,L,T],styles:[".alert[_ngcontent-%COMP%]{position:absolute;z-index:100;background:#dfdfdf}"]})};var C=class{static matchPasswords(e){let o=e.get("password").value,n=e.get("confirmPassword").value;return o!==n?{match_password:!0}:null}static validateUsername(e){return o=>{let n=o.value;return Y(e,n,"username")}}static validateEmail(e){return o=>{let n=o.value;return Y(e,n,"email")}}static emailIsValid(e){return o=>{let n=o.value;return e.isValidEmal(n).pipe(X(s=>s.isValid?null:{not_valid:!0}))}}};function Y(i,e,o){return i.validateAvaible(e,o).pipe(X(n=>n.isAvailable?null:{not_available:!0}))}var Ae=["class","component"];function Re(i,e){i&1&&(t(0,"div"),a(1,"*must have at least 3 letters"),r())}function ke(i,e){i&1&&(t(0,"div"),a(1,"*required"),r())}function Le(i,e){if(i&1&&(t(0,"div",8),d(1,Re,2,0,"div"),d(2,ke,2,0,"div"),r()),i&2){let o=h();l(),c(o.hasError("username","minlength")?1:-1),l(),c(o.hasError("username","required")?2:-1)}}function Te(i,e){i&1&&(t(0,"div"),a(1,"*email is already in use"),r())}function Fe(i,e){i&1&&(t(0,"div"),a(1,"*enter a valid email"),r())}function Ie(i,e){i&1&&(t(0,"div"),a(1,"*required"),r())}function Ne(i,e){if(i&1&&(t(0,"div",8),d(1,Te,2,0,"div"),d(2,Fe,2,0,"div"),d(3,Ie,2,0,"div"),r()),i&2){let o=h();l(),c(o.hasError("email","not_available")?1:-1),l(),c(o.hasError("email","email")?2:-1),l(),c(o.hasError("email","required")?3:-1)}}function Pe(i,e){i&1&&(t(0,"div"),a(1,"*must have at least 8 letters"),r())}function Be(i,e){i&1&&(t(0,"div"),a(1,"*required"),r())}function De(i,e){if(i&1&&(t(0,"div",8),d(1,Pe,2,0,"div")(2,Be,2,0,"div"),r()),i&2){let o=h();l(),c(o.hasError("password","minlength")?1:o.hasError("password","required")?2:-1)}}function qe(i,e){i&1&&(t(0,"div",8)(1,"div"),a(2,"*passwords don't match"),r()())}var Q=class i{constructor(e,o,n,s,g){this.renderer=e;this.router=o;this.route=n;this.formBuilder=s;this.authService=g;this.buildForm()}form;maskLoad=b(!1);buildForm(){this.form=this.formBuilder.group({username:["",[u.required,u.minLength(3)]],email:["",[u.required,u.email],C.validateEmail(this.authService)],password:["",[u.required,u.minLength(8)]],confirmPassword:["",[u.required]]},{validators:C.matchPasswords})}togglePasswordVisibility(e=""){let o="#"+e+"password-input",n="."+e+"icon-password",s=this.renderer.selectRootElement(o),g=this.renderer.selectRootElement(n),Z=s.getAttribute("type")==="password"?"text":"password",$=s.getAttribute("type")==="password"?"fa-eye":"fa-eye-slash",ee=s.getAttribute("type")==="password"?"fa-eye-slash":"fa-eye";this.renderer.setAttribute(s,"type",Z),this.renderer.removeClass(g,$),this.renderer.addClass(g,ee)}signin(){this.router.navigate(["../login"],{relativeTo:this.route})}hasError(e,o){return this.form.get(e).hasError(o)}haveErrors(e){return this.form.get(e).touched&&this.form.get(e).invalid}register(){if(!this.form.valid){this.form.markAllAsTouched();return}this.maskLoad.set(!0),this.authService.register(this.form.value).subscribe({next:e=>{f.success("Welcome!",""),this.maskLoad.set(!1),this.authService.saveAuth(e),this.form.markAsUntouched(),this.router.navigate(["/"])},error:e=>{this.maskLoad.set(!1),f.setOption("timeOut",3e3),window.innerWidth<768&&f.setOption("positionClass","toast-top-center"),f.error(e.error.message,"Failed Register"),f.setDefaultsOptions()}})}static \u0275fac=function(o){return new(o||i)(p(S),p(x),p(E),p(F),p(y))};static \u0275cmp=w({type:i,selectors:[["app-register",8,"component"]],attrs:Ae,decls:50,vars:6,consts:[[1,"auth","register"],[1,"container-xl"],[1,"row"],[1,"col-md-7","form",3,"ngSubmit","formGroup"],[1,"text"],[1,"form-floating","form-floating-custom","mb-3"],["formControlName","username","type","text","id","input-name","placeholder","Enter Name",1,"form-control"],["for","input-name"],[1,"div-error"],["formControlName","email","type","text","id","input-username","placeholder","Enter Email",1,"form-control"],["for","input-username"],[1,"form-floating","form-floating-custom","form-password","auth-pass-inputgroup","mb-3"],["formControlName","password","type","password","id","password-input","placeholder","Enter Password",1,"form-control"],["type","button","id","password-addon",1,"btn","btn-link","position-absolute","h-100","end-0","top-0",3,"click"],[1,"icon-password","fa-regular","fa-eye"],["for","input-password"],["formControlName","confirmPassword","type","password","id","conf-password-input","placeholder","Enter Confirm Password",1,"form-control"],["type","button","id","conf-password-addon",1,"btn","btn-link","position-absolute","h-100","end-0","top-0",3,"click"],[1,"conf-icon-password","fa-regular","fa-eye"],[1,"mt-4"],["type","submit",1,"btn","btn-dark","shadow-none","w-100"],[1,"mt-3","text-center"],[1,"mb-0","text-muted"],[1,"text-success","fw-bold","text-decoraton-underline","ms-1",3,"click"],[1,"col-md-5","text_auth"],[1,"fondo"],["src","assets/images/auth/cloud_blanco.png","alt","",1,"logo"],[1,"circulo-container"],[1,"circulo"],[1,"ondas","morada"],[1,"ondas","rosa"],[1,"circulo","fondo"],[3,"show"]],template:function(o,n){if(o&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),v("ngSubmit",function(){return n.register()}),t(4,"div",4),a(5," Register in to "),t(6,"p"),a(7,"SenntCloud"),r()(),t(8,"div",5),m(9,"input",6),t(10,"label",7),a(11,"Name"),r(),d(12,Le,3,2,"div",8),r(),t(13,"div",5),m(14,"input",9),t(15,"label",10),a(16,"Email"),r(),d(17,Ne,4,3,"div",8),r(),t(18,"div",11),m(19,"input",12),t(20,"button",13),v("click",function(){return n.togglePasswordVisibility()}),m(21,"i",14),r(),t(22,"label",15),a(23,"Password"),r(),d(24,De,3,1,"div",8),r(),t(25,"div",11),m(26,"input",16),t(27,"button",17),v("click",function(){return n.togglePasswordVisibility("conf-")}),m(28,"i",18),r(),t(29,"label",15),a(30,"Confirm Password"),r(),d(31,qe,3,0,"div",8),r(),t(32,"div",19)(33,"button",20),a(34,"Register"),r()(),m(35,"hr"),t(36,"div",21)(37,"p",22),a(38," Have an account ?"),t(39,"a",23),v("click",function(){return n.signin()}),a(40," Sign in "),r()()()(),t(41,"div",24),m(42,"div",25)(43,"img",26),t(44,"div",27)(45,"div",28),m(46,"span",29)(47,"span",30)(48,"span",31),r()()()()()(),m(49,"app-loading",32)),o&2){let s;l(3),_("formGroup",n.form),l(9),c(n.haveErrors("username")?12:-1),l(5),c(n.haveErrors("email")?17:-1),l(7),c(n.haveErrors("password")?24:-1),l(7),c((s=n.form.get("confirmPassword"))!=null&&s.touched&&n.form.errors&&n.form.hasError("match_password")?31:-1),l(18),_("show",n.maskLoad())}},dependencies:[N,P,B,D,q,V,G,j,O,U,H,W,z,J,I,k,M,A,R,L,T],encapsulation:2})};var lt=[{path:"login",component:K},{path:"register",component:Q},{path:"**",redirectTo:"login"}];export{lt as AUTH_ROUTES};
